<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.echoed.chamber.dao.FacebookUserDao">
    <resultMap id="facebookUserResult" type="com.echoed.chamber.domain.FacebookUser">
        <constructor>
            <idArg column="id" javaType="String" />
            <arg column="firstName" javaType="String" />
			<arg column="lastName" javaType="String" />
			<arg column="link" javaType="String" />
			<arg column="gender" javaType="String" />
			<arg column="email" javaType="String" />
			<arg column="timezone" javaType="String" />
			<arg column="locale" javaType="String" />
        </constructor>
        <result property="username" column="username" javaType="String" />
    </resultMap>


    <select id="findById" resultMap="facebookUserResult">
    	select * from FacebookUser where id = #{value}
    </select>

    <insert id="insertOrUpdate" parameterType="com.echoed.chamber.domain.FacebookUser">
    	insert into FacebookUser(
    			id,
    			echoedUserId,
    			username,
    			firstName,
    			lastName,
    			email,
    			link,
    			timezone,
    			locale,
    			gender,
    			accessToken)
    		values (
    			#{id},
    			#{echoedUserId},
    			#{username},
    			#{firstName},
    			#{lastName},
    			#{email},
    			#{link},
    			#{timezone},
    			#{locale},
    			#{gender},
    			#{accessToken})
            on duplicate key update
                id=#{id},
	    		echoedUserId=#{echoedUserId},
	    		username=#{username},
	    		firstName=#{firstName},
	    		lastName=#{lastName},
	    		email=#{email},
	    		link=#{link},
	    		timezone=#{timezone},
	    		locale=#{locale},
                gender=#{gender},
	    		accessToken=#{accessToken}
    </insert>


    <delete id="deleteByEmail">
        delete from FacebookUser where email = #{email}
    </delete>
</mapper>
