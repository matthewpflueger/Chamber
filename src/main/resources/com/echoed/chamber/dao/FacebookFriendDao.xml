<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.echoed.chamber.dao.FacebookFriendDao">
    <resultMap id="facebookFriendResult" type="com.echoed.chamber.domain.FacebookFriend">
        <constructor>
            <idArg column="id" javaType="String" />
            <arg column="updatedOn" javaType="Date" />
			<arg column="createdOn" javaType="Date" />
            <arg column="facebookUserId" javaType="String" />
            <arg column="facebookId" javaType="String" />
            <arg column="name" javaType="String" />
        </constructor>
    </resultMap>


    <select id="findByFacebookUserId" resultMap="facebookFriendResult">
    	select * from FacebookFriend where facebookUserId = #{facebookUserId}
    </select>

    <insert id="insertOrUpdate" parameterType="com.echoed.chamber.domain.FacebookFriend">
    	insert into FacebookFriend(
    			id,
    			createdOn,
    			facebookUserId,
    			facebookId,
    			name)
    		values (
    			#{id},
    			#{createdOn},
    			#{facebookUserId},
    			#{facebookId},
    			#{name})
    	    on duplicate key update
    	        name = #{name}
    </insert>

    <delete id="deleteByFacebookUserId">
        delete from FacebookFriend where facebookUserId = #{facebookUserId}
    </delete>
</mapper>
