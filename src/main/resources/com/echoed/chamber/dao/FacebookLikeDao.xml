<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.echoed.chamber.dao.FacebookLikeDao">
    <resultMap id="facebookLikeResult" type="com.echoed.chamber.domain.FacebookLike">
        <constructor>
            <idArg column="id" javaType="String" />
            <arg column="updatedOn" javaType="Date" />
            <arg column="createdOn" javaType="Date" />
            <arg column="facebookPostId" javaType="String" />
            <arg column="facebookUserId" javaType="String" />
            <arg column="echoedUserId" javaType="String" />
            <arg column="facebookId" javaType="String" />
            <arg column="name" javaType="String" />
        </constructor>
    </resultMap>


    <select id="findByFacebookPostId" resultMap="facebookLikeResult">
    	select * from FacebookLike where facebookPostId = #{facebookPostId}
    </select>

    <insert id="insertOrUpdate" parameterType="com.echoed.chamber.domain.FacebookLike">
    	insert into FacebookLike(
                id,
                createdOn,
                facebookPostId,
                facebookUserId,
                echoedUserId,
                facebookId,
                name)
        values (
                #{id},
                #{createdOn},
                #{facebookPostId},
                #{facebookUserId},
                #{echoedUserId},
                #{facebookId},
                #{name})
        on duplicate key update
                name = #{name}
    </insert>

    <delete id="deleteByFacebookPostId">
        delete from FacebookLike where facebookPostId=#{facebookPostId}
    </delete>

</mapper>
