<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.echoed.chamber.dao.EchoClickDao">

    <cache-ref namespace="com.echoed.chamber.dao.cache.Default" />

    <resultMap id="echoClickResult" type="com.echoed.chamber.domain.EchoClick">
        <constructor>
            <idArg column="id" javaType="String" />
            <arg column="updatedOn" javaType="Date" />
            <arg column="createdOn" javaType="Date" />
            <arg column="echoId" javaType="String" />
            <arg column="facebookPostId" javaType="String" />
            <arg column="twitterStatusId" javaType="String" />
            <arg column="echoedUserId" javaType="String" />
            <arg column="referrerUrl" javaType="String" />
            <arg column="ipAddress" javaType="String" />
            <arg column="clickedOn" javaType="Date" />
            <arg column="forwardedFor" javaType="String" />
            <arg column="echoPossibilityId" javaType="String"/>
        </constructor>
    </resultMap>

    <select id="findByEchoId" resultMap="echoClickResult">
        select * from EchoClick where echoId = #{echoId}
    </select>

    <insert id="insert" parameterType="com.echoed.chamber.domain.EchoClick">

    	insert into EchoClick(
    			id,
    			createdOn,
                echoId,
                facebookPostId,
                twitterStatusId,
                echoedUserId,
                referrerUrl,
                ipAddress,
                clickedOn,
                forwardedFor,
                echoPossibilityId)
        values (
                #{id},
                #{createdOn},
                #{echoId},
                #{facebookPostId},
                #{twitterStatusId},
                #{echoedUserId},
                #{referrerUrl},
                #{ipAddress},
                #{clickedOn},
                #{forwardedFor},
                #{echoPossibilityId})
    </insert>

    <delete id="deleteByEchoId">
        delete from EchoClick where echoId = #{echoId}
    </delete>
</mapper>
